<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Spin the Wheel ‚Äî VIP</title>
  <style>
:root {
  --bg: #110E07;
  --panel-bg: #1D1D1D;
  --accent: #DBC458;
  --yellow: #FFE066;      /* lighter yellow for general text */
  --rank-yellow: #8B681F; /* for ranks (VIP etc) */
  --green: #0f990c;       /* Luck Potion II text */
  --purple: #9b59b6;
  --white: #EEEEEE;
  --dark: #8B681F;
  --chat-bg: #1D1D1D;
}

body {
  margin: 0; padding: 0;
  background: var(--bg);
  color: var(--yellow); /* lighter yellow for most text */
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  height: 100vh;
  overflow: hidden;
}

#main-container {
  display: flex;
  gap: 20px;
  padding: 20px;
  width: 100%;
  box-sizing: border-box;
}

#left-panel, #right-panel, #controls, #shop, #give-coins, #chat-box {
  background: var(--panel-bg);
  border-radius: 12px;
  padding: 15px;
  box-sizing: border-box;
  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.15);
  color: var(--yellow); /* lighter yellow for panel text */
}

#center-panel {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  color: var(--yellow); /* lighter yellow for center panel */
}

h2 {
  margin-top: 0;
  color: var(--yellow);
}

#leaderboardList {
  flex: 0 1 auto;
  overflow-y: auto;
  padding: 0;
  list-style: none;
  margin: 0;
}

#leaderboardList li {
  margin: 6px 0;
  color: var(--yellow); /* lighter yellow for list */
}

#chat-box {
  flex: 1;
  display: flex;
  flex-direction: column;
  margin-top: 20px;
  color: var(--yellow); /* lighter yellow for chat */
}

#chat-messages {
  background: var(--chat-bg);
  flex: 1;
  border-radius: 6px;
  padding: 10px;
  overflow-y: auto;
  height: 140px;
  color: var(--yellow); /* lighter yellow for chat messages */
}

#chat-input-area {
  display: flex;
  gap: 6px;
  margin-top: 8px;
}

/* Text boxes - keep text white */
#chatMessage,
#give-coins input,
#controls input {
  color: var(--white);
  background: var(--dark);
  border: none;
  border-radius: 4px;
  padding: 6px;
}

/* Buttons */
#sendChat,
#giveBtn,
#controls button,
.shop-item button {
  background: var(--accent);
  color: #1D1D1D;
  border-radius: 4px;
  font-weight: bold;
  cursor: pointer;
  border: none;
  padding: 6px 12px;
}

#wheel-pointer {
  font-size: 36px;
  color: var(--accent);
  position: relative;
  top: -450px;
  text-align: center;
  transform: rotate(180deg);
  pointer-events: none;
  text-shadow: 0 0 10px var(--accent);
}

canvas {
  border: 6px solid var(--accent);
  border-radius: 50%;
  background: var(--dark);
}

/* Shop area and ranks */
#shop {
  margin-top: 30px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: var(--yellow); /* lighter yellow for shop text */
}

/* Shop labels and ranks: use custom colors */
.shop-item .vip-label {
  font-weight: bold;
  color: var(--rank-yellow); /* darker yellow for ranks (VIP etc) */
}
.shop-item .vip-label.vip { color: var(--rank-yellow); }
.shop-item .vip-label.vip-plus { color: #f1c40f; }
.shop-item .vip-label.vip-plusplus { color: #9b59b6; }
.shop-item .vip-label.luck,
.shop-item .vip-label.luck-II { color: #0f990c !important; }
.shop-item .vip-label.stealer { color: orange; }

/* Shop h2 stays lighter yellow */
#shop h2 {
  margin-bottom: 12px;
  color: var(--yellow);
}

#luck-timer {
  font-size: 13px;
  font-weight: normal;
  color: #0f990c;
  margin-left: 8px;
}
  </style>
</head>
<body>
<div id="main-container">
  <div id="left-panel">
    <h2>üèÜ Leaderboard</h2>
    <ul id="leaderboardList"></ul>
    <div id="chat-box">
      <h2>üí¨ Chat</h2>
      <div id="chat-messages"></div>
      <div id="chat-input-area">
        <input id="chatMessage" type="text" placeholder="Type a message..." maxlength="100">
        <button id="sendChat">Send</button>
      </div>
    </div>
  </div>
  <div id="center-panel">
    <canvas id="wheel" width="400" height="400"></canvas>
    <div id="controls">
      <div id="wheel-pointer">‚ñ≤</div>
      <input id="username" type="text" placeholder="Username (max 10)" maxlength="10">
      <input id="userPassword" type="password" placeholder="Password">
      <button id="setUsername">Set Username</button>
      <p id="userinfo">Not logged in</p>
      <input id="bet" type="number" placeholder="Bet amount">
      <button id="spin">SPIN üé°</button>
    </div>
  </div>
  <div id="right-panel">
    <h2>üéÅ Give Coins</h2>
    <div id="give-coins">
      <input id="giveToUser" type="text" placeholder="Username">
      <input id="giveAmount" type="number" placeholder="Amount">
      <button id="giveBtn">Give</button>
    </div>
    <div id="shop">
      <h2>üõí Shop</h2>
      <div class="shop-item">
        <span class="vip-label vip">‚≠êVIP</span>
        <button id="buyVIP">Buy for 1000</button>
      </div>
      <div class="shop-item">
        <span class="vip-label vip-plus">‚öúÔ∏èVIP+</span>
        <button id="buyVIPplus">Buy for 5000</button>
      </div>
      <div class="shop-item">
        <span class="vip-label vip-plusplus">üíéVIP++</span>
        <button id="buyVIPplusplus">Buy for 10000</button>
      </div>
      <div class="shop-item">
        <span class="vip-label luck">‚òòÔ∏éLuck Potion +5%</span>
        <button id="buyLuckPotion">Buy for 500</button>
        <span id="luck-timer-5"></span>
      </div>
      <div class="shop-item">
        <span class="vip-label luck">üçÄLuck Potion II +20%</span>
        <button id="buyLuckPotion2">Buy for 1500</button>
        <span id="luck-timer-20"></span>
      </div>
      <div class="shop-item">
        <span class="vip-label stealer">üí∞the stealer</span>
        <input id="stealTarget" type="text" placeholder="Target username" style="width:90px;">
        <button id="buyStealer">Use for 2000</button>
      </div>
    </div>
  </div>
</div>
<script>
const API_URL = "https://68e839b2f2707e6128ca35e1.mockapi.io/players";
const CHAT_URL = "https://68e839b2f2707e6128ca35e1.mockapi.io/chat";
const MAX_USERS = 10;
const WHEEL_OUTCOMES = [
  "1.5x","0.5x","0.5x","1.1x","1.8x","10x","1.9x","Lose","Lose","1.7x",
  "Lose","1x","Lose","1x","Lose","Lose","1.4x","2.5x","Lose","1.2x",
  "Lose","Lose","2.0x","Lose","5.0x","1.3x","Lose","1.6x","0.5x","Lose",
  "2.5x","Lose","0.75x","Lose","Lose","2.0x","Lose","Lose"
];
const N = WHEEL_OUTCOMES.length;
const sliceDeg = 360 / N;

// DOM
const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const spinBtn = document.getElementById("spin");
const betInput = document.getElementById("bet");
const usernameInput = document.getElementById("username");
const passwordInput = document.getElementById("userPassword");
const setUsernameBtn = document.getElementById("setUsername");
const info = document.getElementById("userinfo");
const chatMessages = document.getElementById("chat-messages");
const chatInput = document.getElementById("chatMessage");
const sendChat = document.getElementById("sendChat");
const giveToUser = document.getElementById("giveToUser");
const giveAmount = document.getElementById("giveAmount");
const giveBtn = document.getElementById("giveBtn");
const buyVIPBtn = document.getElementById("buyVIP");
const buyVIPplusBtn = document.getElementById("buyVIPplus");
const buyVIPplusplusBtn = document.getElementById("buyVIPplusplus");
const buyLuckPotionBtn = document.getElementById("buyLuckPotion");
const buyLuckPotion2Btn = document.getElementById("buyLuckPotion2");
const luckTimer5 = document.getElementById("luck-timer-5");
const luckTimer20 = document.getElementById("luck-timer-20");
const buyStealerBtn = document.getElementById("buyStealer");
const stealTargetInput = document.getElementById("stealTarget");

// STATE
let rotationDeg = 0;
let spinning = false;
let username = "";
let password = "";
let coins = 100;
let rank = "None";
// Potion state
let luckBonus = 0; // 0, 5, 20
let luckTimerEnd = 0; // timestamp
let luckTimerActive = false;
let luckInterval = null;

// DRAW WHEEL
function drawWheel(rotDeg) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  const cx = canvas.width/2, cy = canvas.height/2;
  const radius = Math.min(cx, cy) - 10;
  ctx.save();
  ctx.translate(cx, cy);
  ctx.rotate((rotDeg - 90) * Math.PI / 180);
  const slice = 2 * Math.PI / N;
  for (let i = 0; i < N; i++) {
    const angle = i * slice;
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.arc(0,0, radius, angle, angle + slice);
    ctx.closePath();
    // color logic
    const out = WHEEL_OUTCOMES[i];
    let fill = "#8B681F";
    if (out === "Lose" || out === "0.5x" || out === "0.75x") fill = "#1D1D1D";
    if (out === "5.0x" || out === "10x") fill = "#DBC458";
    ctx.fillStyle = fill;
    ctx.fill();
    ctx.strokeStyle = "#111";
    ctx.lineWidth = 2;
    ctx.stroke();

    // text
    ctx.save();
    ctx.rotate(angle + slice/2);
    ctx.translate(radius * 0.9, 0);
    ctx.rotate(Math.PI/2);
    ctx.fillStyle = "white";
    ctx.font = "bold 14px Arial";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(WHEEL_OUTCOMES[i], 0, 0);
    ctx.restore();
  }
  ctx.restore();
}

function updateInfo() {
  info.textContent = username
    ? `${username}: ${coins} | ${rank}`
    : "Not logged in";
  if (rank === "VIP") info.style.color = "#ffe066";
  else if (rank === "VIP+") info.style.color = "#f1c40f";
  else if (rank === "VIP++") info.style.color = "#9b59b6";
  else info.style.color = "white";
}

async function fetchPlayers() {
  try {
    const r = await fetch(API_URL);
    return await r.json();
  } catch(e) {
    return [];
  }
}

async function updatePlayerOnServer(player) {
  const list = await fetchPlayers();
  const existing = list.find(p => p.name === player.name);
  if (existing) {
    await fetch(`${API_URL}/${existing.id}`, {
      method: "PUT",
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(player)
    });
  } else {
    await fetch(API_URL, {
      method: "POST",
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(player)
    });
  }
}

async function renderLeaderboard() {
  const ul = document.getElementById("leaderboardList");
  ul.innerHTML = "";
  const list = await fetchPlayers();
  list.sort((a, b) => b.coins - a.coins);
  list.slice(0, MAX_USERS).forEach((p, i) => {
    let color = "#fff";
    if (p.rank === "VIP") color = "#ffe066";
    else if (p.rank === "VIP+") color = "#f1c40f";
    else if (p.rank === "VIP++") color = "#9b59b6";
    const nameSpan = `<span style="color:${color};font-weight:bold;">${p.name}</span>`;
    const li = document.createElement("li");
    li.innerHTML = `${i + 1}. ${nameSpan}: ${p.coins} | ${p.rank || "None"}`;
    ul.appendChild(li);
  });
}

async function fetchChat() {
  try {
    const r = await fetch(CHAT_URL);
    return await r.json();
  } catch(e) {
    return [];
  }
}

async function renderChat() {
  const msgs = await fetchChat();
  const players = await fetchPlayers(); // For ranks
  chatMessages.innerHTML = "";
  msgs.slice(-50).forEach(m => {
    const div = document.createElement("div");
    // Private message (PM)
    if (m.to && (m.to === username || m.user === username)) {
      div.style.background = "#282842";
      div.style.color = "#2ecc71";
      div.style.fontStyle = "italic";
      div.textContent = `[PM] ${m.user} ‚Üí ${m.to}: ${m.text}`;
      chatMessages.appendChild(div);
      return;
    }
    // Announcement
    if (m.user === "ANNOUNCEMENT") {
      div.style.color = "#f1c40f";
      div.style.fontWeight = "bold";
      div.textContent = `üîî ${m.text}`;
      chatMessages.appendChild(div);
      return;
    }
    // Get rank for color
    let color = "#fff";
    let fontWeight = "normal";
    const userObj = players.find(p => p.name === m.user);
    if (userObj) {
      if (userObj.rank === "VIP") {
        color = "#ffe066";
        fontWeight = "bold";
      } else if (userObj.rank === "VIP+") {
        color = "#f1c40f";
        fontWeight = "bold";
      } else if (userObj.rank === "VIP++") {
        color = "#9b59b6";
        fontWeight = "bold";
      }
    }
    // Render user/rank
    const span = document.createElement("span");
    span.textContent = `${m.user}: `;
    span.style.color = color;
    span.style.fontWeight = fontWeight;
    div.appendChild(span);
    div.appendChild(document.createTextNode(m.text));
    chatMessages.appendChild(div);
  });
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

// TIMER for luck potions
function startLuckTimer(percent) {
  luckBonus = percent;
  luckTimerEnd = Date.now() + 5 * 60 * 1000; // 5 min
  luckTimerActive = true;
  updateLuckTimerDisplay();
  buyLuckPotionBtn.disabled = true;
  buyLuckPotion2Btn.disabled = true;
  if (luckInterval) clearInterval(luckInterval);
  luckInterval = setInterval(() => {
    updateLuckTimerDisplay();
    if (Date.now() >= luckTimerEnd) {
      clearInterval(luckInterval);
      luckBonus = 0;
      luckTimerActive = false;
      luckTimerEnd = 0;
      buyLuckPotionBtn.disabled = false;
      buyLuckPotion2Btn.disabled = false;
      luckTimer5.textContent = "";
      luckTimer20.textContent = "";
      alert("Luck potion effect has ended.");
    }
  }, 1000);
}

function updateLuckTimerDisplay() {
  if (!luckTimerActive) {
    luckTimer5.textContent = "";
    luckTimer20.textContent = "";
    return;
  }
  const seconds = Math.max(0, Math.floor((luckTimerEnd - Date.now()) / 1000));
  const min = Math.floor(seconds / 60);
  const sec = seconds % 60;
  if (luckBonus === 5) {
    luckTimer5.textContent = `‚è≥ ${min}:${sec < 10 ? "0" : ""}${sec}`;
    luckTimer20.textContent = "";
  } else if (luckBonus === 20) {
    luckTimer20.textContent = `‚è≥ ${min}:${sec < 10 ? "0" : ""}${sec}`;
    luckTimer5.textContent = "";
  }
}

// LOGIN
setUsernameBtn.onclick = async () => {
  const u = usernameInput.value.trim();
  const p = passwordInput.value;
  if (!u || !p) {
    alert("Enter username and password");
    return;
  }
  if (u.length > 10) {
    alert("Username max length is 10");
    return;
  }
  let players = await fetchPlayers();
  if (players.length >= MAX_USERS && !players.some(pl => pl.name === u)) {
    alert("Server full (max 10 users)");
    return;
  }
  const existing = players.find(pl => pl.name === u);
  if (existing) {
    if (existing.password !== p) {
      alert("Wrong password");
      return;
    }
    username = u;
    password = p;
    coins = existing.coins;
    rank = existing.rank || "None";
  } else {
    username = u;
    password = p;
    coins = 100;
    rank = "None";
    await updatePlayerOnServer({name: u, password: p, coins, rank});
  }
  usernameInput.disabled = true;
  passwordInput.disabled = true;
  setUsernameBtn.disabled = true;
  updateInfo();
  renderLeaderboard();
  renderChat();
};

// SPIN LOGIC
spinBtn.onclick = () => {
  if (!username) {
    alert("Login first");
    return;
  }
  if (spinning) return;
  const bet = Math.floor(Number(betInput.value) || 0);
  if (bet <= 0 || bet > coins) {
    alert("Invalid bet");
    return;
  }
  coins -= bet;
  updateInfo();
  spinning = true;

  // Luck bonus logic if used
  let idx;
  if (luckBonus > 0) {
    let weighted = [];
    for (let i = 0; i < N; i++) {
      if (WHEEL_OUTCOMES[i] === "Lose") {
        weighted.push(i);
      } else {
        let weight = 1 + luckBonus / 100;
        for (let w = 0; w < weight; w++) weighted.push(i);
      }
    }
    idx = weighted[Math.floor(Math.random() * weighted.length)];
  } else {
    idx = Math.floor(Math.random() * N);
  }

  const result = WHEEL_OUTCOMES[idx];
  const currentNorm = ((rotationDeg % 360) + 360) % 360;
  const sliceCenter = idx * sliceDeg + sliceDeg / 2;
  const baseRot = (360 - sliceCenter) % 360;
  const delta = (baseRot - currentNorm + 360) % 360;
  const fullSpins = 6 + Math.floor(Math.random() * 5);
  const target = rotationDeg + fullSpins * 360 + delta;
  const start = rotationDeg;
  const duration = 4200;
  const t0 = performance.now();

  function step(t) {
    const elapsed = t - t0;
    const p = Math.min(elapsed / duration, 1);
    const ease = 1 - Math.pow(1 - p, 3);
    rotationDeg = start + (target - start) * ease;
    drawWheel(rotationDeg);

    if (p < 1) {
      requestAnimationFrame(step);
    } else {
      rotationDeg = baseRot + 360 * Math.floor(rotationDeg / 360);
      let win = 0;
      let mult = 0;
      if (result !== "Lose") {
        mult = parseFloat(result.replace("x", ""));
        if (!Number.isNaN(mult)) {
          win = Math.floor(bet * mult);
          // GLOBAL ANNOUNCEMENT FOR BIG WINS!
          if (mult >= 5 || win >= 1000) {
            fetch(CHAT_URL, {
              method: "POST",
              headers: {'Content-Type':'application/json'},
              body: JSON.stringify({
                user: "ANNOUNCEMENT",
                text: `${username} JUST WON ${win} COINS WITH A ${result} SPIN!`
              })
            });
          }
        }
      }
      if (result === "Lose") {
        alert("üò¢ You lost your bet!");
      } else {
        alert(`üéâ You won ${win} coins! (${result})`);
      }
      coins += win;
      if (coins <= 0) coins = 100;
      updatePlayerOnServer({name: username, password, coins, rank});
      updateInfo();
      renderLeaderboard();
      spinning = false;
    }
  }
  requestAnimationFrame(step);
};

// GIVE COINS
giveBtn.onclick = async () => {
  if (!username) {
    alert("Login first");
    return;
  }
  const to = giveToUser.value.trim();
  const amt = Math.floor(Number(giveAmount.value) || 0);
  if (!to || amt <= 0) {
    alert("Invalid give input");
    return;
  }
  if (coins < amt) {
    alert("You don't have enough coins");
    return;
  }
  const list = await fetchPlayers();
  const target = list.find(p => p.name === to);
  if (!target) {
    alert("Recipient not found");
    return;
  }
  target.coins += amt;
  coins -= amt;
  await updatePlayerOnServer(target);
  await updatePlayerOnServer({name: username, password, coins, rank});
  updateInfo();
  renderLeaderboard();
  alert(`Given ${amt} coins to ${to}`);
};

// CHAT (supports private messages with "/w username message")
sendChat.onclick = async () => {
  if (!username) {
    alert("Login first");
    return;
  }
  const txt = chatInput.value.trim();
  if (!txt) return;
  if (txt.startsWith("/w ")) {
    // Private message
    const match = txt.match(/^\/w\s+(\S+)\s+(.+)/);
    if (match) {
      const toUser = match[1];
      const message = match[2];
      await fetch(CHAT_URL, {
        method: "POST",
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({user: username, to: toUser, text: message})
      });
      chatInput.value = "";
      renderChat();
      return;
    }
  }
  await fetch(CHAT_URL, {
    method: "POST",
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({user: username, text: txt})
  });
  chatInput.value = "";
  renderChat();
};

renderChat();
setInterval(renderChat, 5000);

// SHOP LOGIC
buyVIPBtn.onclick = async () => {
  if (!username) {
    alert("Login first to buy VIP!");
    return;
  }
  if (rank === "VIP" || rank === "VIP+" || rank === "VIP++") {
    alert("You already have a VIP rank or higher!");
    return;
  }
  if (coins < 1000) {
    alert("Not enough coins for VIP!");
    return;
  }
  coins -= 1000;
  rank = "VIP";
  await updatePlayerOnServer({name: username, password, coins, rank});
  updateInfo();
  renderLeaderboard();
  alert("You bought VIP!");
};
buyVIPplusBtn.onclick = async () => {
  if (!username) {
    alert("Login first to buy VIP+!");
    return;
  }
  if (rank === "VIP+" || rank === "VIP++") {
    alert("You already have VIP+ or higher!");
    return;
  }
  if (coins < 5000) {
    alert("Not enough coins for VIP+!");
    return;
  }
  coins -= 5000;
  rank = "VIP+";
  await updatePlayerOnServer({name: username, password, coins, rank});
  updateInfo();
  renderLeaderboard();
  alert("You bought VIP+!");
};
buyVIPplusplusBtn.onclick = async () => {
  if (!username) {
    alert("Login first to buy VIP++!");
    return;
  }
  if (rank === "VIP++") {
    alert("You already have VIP++!");
    return;
  }
  if (coins < 10000) {
    alert("Not enough coins for VIP++!");
    return;
  }
  coins -= 10000;
  rank = "VIP++";
  await updatePlayerOnServer({name: username, password, coins, rank});
  updateInfo();
  renderLeaderboard();
  alert("You bought VIP++!");
};
buyLuckPotionBtn.onclick = async () => {
  if (!username) {
    alert("Login first to buy Luck Potion!");
    return;
  }
  if (coins < 500) {
    alert("Not enough coins for Luck Potion!");
    return;
  }
  if (luckTimerActive) {
    alert("A luck potion is already active!");
    return;
  }
  coins -= 500;
  await updatePlayerOnServer({name: username, password, coins, rank});
  updateInfo();
  renderLeaderboard();
  startLuckTimer(5);
  alert("Luck Potion +5% activated! Lasts for 5 minutes.");
};
buyLuckPotion2Btn.onclick = async () => {
  if (!username) {
    alert("Login first to buy Luck Potion II!");
    return;
  }
  if (coins < 1500) {
    alert("Not enough coins for Luck Potion II!");
    return;
  }
  if (luckTimerActive) {
    alert("A luck potion is already active!");
    return;
  }
  coins -= 1500;
  await updatePlayerOnServer({name: username, password, coins, rank});
  updateInfo();
  renderLeaderboard();
  startLuckTimer(20);
  alert("Luck Potion II +20% activated! Lasts for 5 minutes.");
};
// üí∞the stealer logic
buyStealerBtn.onclick = async () => {
  if (!username) {
    alert("Login first to use The Stealer!");
    return;
  }
  if (coins < 2000) {
    alert("Not enough coins for The Stealer!");
    return;
  }
  const targetName = stealTargetInput.value.trim();
  if (!targetName || targetName === username) {
    alert("Enter a valid username to steal from (not yourself)!");
    return;
  }
  const players = await fetchPlayers();
  const target = players.find(p => p.name === targetName);
  if (!target) {
    alert("Target user not found!");
    return;
  }
  coins -= 2000;

  // Steal logic: 25% chance
  if (Math.random() < 0.25) {
    const stealAmount = Math.floor(target.coins * 0.10);
    if (stealAmount > 0) {
      coins += stealAmount;
      target.coins -= stealAmount;
      await updatePlayerOnServer(target);
      alert(`Success! You stole ${stealAmount} coins from ${targetName}.`);
      // Optional: global chat announcement
      fetch(CHAT_URL, {
        method: "POST",
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({
          user: "ANNOUNCEMENT",
          text: `${username} just stole ${stealAmount} coins from ${targetName} using üí∞the stealer!`
        })
      });
    } else {
      alert("Target doesn't have enough coins to steal from!");
    }
  } else {
    alert("Steal failed! Better luck next time.");
  }
  await updatePlayerOnServer({name: username, password, coins, rank});
  updateInfo();
  renderLeaderboard();
};

// INIT
drawWheel(rotationDeg);
updateInfo();
renderLeaderboard();
renderChat();

setInterval(renderLeaderboard, 5000);
setInterval(renderChat, 5000);

</script>
</body>
</html>
